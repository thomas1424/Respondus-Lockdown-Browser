(()=>{"use strict";var e={4391:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.protectPage=void 0;t.protectPage=async(e,t,o,n,r,l=!0)=>{const a=(n=n||window)?n.document.body:document.body,c=l?"":"_standard";a.addEventListener("contextmenu",e=>{e.preventDefault()});const s=n===window.parent;var i=null,d=!1,u=!1;const y=()=>{m(),a.innerHTML="",v("The extension has been uninstalled which is not permitted."),setTimeout(()=>{n.location.href=n.origin},4e3)},m=()=>{const e=document.cookie.split(";");for(let t=0;t<e.length;t++){const o=e[t],n=o.indexOf("=");let r=n>-1?o.substr(0,n):o;document.cookie=r+="=;expires=Thu, 01 Jan  1970 00:00:00 GMT;path=/"}},p=async()=>{try{const t=await navigator.clipboard.read();t[0]&&t[0].types.includes("image/png")&&(await navigator.clipboard.writeText(" "),d=!0,e&&v(e.screenshot_warning),chrome.runtime.sendMessage("screenshotdetected",t=>{t.screenshotCount>1&&(u=!0,e&&v(e.screenshot_exit))}))}catch(e){}},h=async(e,t)=>{if(t&&n.location.href.includes(t)){if("granted"===(await navigator.permissions.query({name:"clipboard-write"})).state&&(await(async()=>{try{for(let e=1;e<11;e++)await navigator.clipboard.writeText(" ".repeat(e))}catch(e){}})(),e)){await navigator.permissions.query({name:"clipboard-read"})&&setInterval(p,3e3)}}},v=e=>{i&&i.remove(),(i=document.createElement("div")).style.backgroundColor="rgb(239, 239, 239)",i.style.position="fixed",i.style.width="100%",i.style.top="0",i.style.left="0",i.style.zIndex="3000",i.style.height="100%";const t=document.createElement("p");t.style.textAlign="left",t.style.position="absolute",t.style.top="200px",t.style.left="40px",t.style.fontFamily="verdana",t.style.fontSize="24px",t.style.wordWrap="break-word",t.style.whiteSpace="normal",t.style.color="black",t.style.lineHeight="1",e&&(t.innerHTML=e),i.appendChild(t),a.appendChild(i)},f=()=>{i&&!u&&(i.remove(),i=null)},w=(t,o,n)=>{"focuslost"===t.action&&e&&v(e[`focus_lost_warning${c}`]),"focuslostlimit"===t.action&&e&&(v(e[`focus_lost_exit${c}`]),u=!0),"displaychange"===t.action&&e&&(v(e.secondary_display_exit),u=!0),"protectpagesignalcheck"===t.action&&n("response")},g=t=>{"showoverlay"===t.data&&v(),"hideoverlay"===t.data&&f(),"showoverlay-ctrlalt"===t.data&&e&&v(e.ctrl_alt_shift_warning)};a.addEventListener("keydown",t=>{!t.ctrlKey||t.shiftKey||t.altKey||(s?v():window.parent.postMessage("showoverlay","*")),t.ctrlKey&&t.shiftKey&&(t.preventDefault(),d=!0,s&&e?v(e.ctrl_alt_shift_warning):window.parent.postMessage("showoverlay-ctrlalt","*")),t.ctrlKey&&t.altKey&&(t.preventDefault(),d=!0,s&&e?v(e.ctrl_alt_shift_warning):window.parent.postMessage("showoverlay-ctrlalt","*")),(t.ctrlKey||t.metaKey)&&"p"===t.key&&t.preventDefault(),(t.ctrlKey||t.metaKey)&&"s"===t.key&&t.preventDefault(),(t.ctrlKey||t.metaKey)&&"w"===t.key&&t.preventDefault(),!t.ctrlKey&&!t.metaKey||"h"!==t.key&&"j"!==t.key||t.preventDefault(),!t.ctrlKey&&!t.metaKey||"k"!==t.key&&"l"!==t.key||t.preventDefault(),!t.ctrlKey&&!t.metaKey||"t"!==t.key&&"n"!==t.key||t.preventDefault(),(t.ctrlKey||t.metaKey)&&"d"===t.key&&t.preventDefault(),(t.ctrlKey||t.metaKey)&&"u"===t.key&&t.preventDefault(),(t.ctrlKey||t.metaKey)&&"o"===t.key&&t.preventDefault(),(t.ctrlKey||t.metaKey)&&"f"===t.key&&"gp"===r&&t.preventDefault(),(t.ctrlKey||t.metaKey)&&"r"===t.key&&t.preventDefault(),(t.ctrlKey||t.metaKey)&&"Tab"===t.key&&t.preventDefault(),(t.ctrlKey||t.metaKey)&&/^[1-9]$/.test(t.key)&&t.preventDefault(),"F12"===t.key&&t.preventDefault(),"Escape"===t.key&&(d=!1,s?f():window.parent.postMessage("hideoverlay","*"))}),a.addEventListener("keyup",e=>{"Control"!==e.key||d||(s?f():window.parent.postMessage("hideoverlay","*"))}),s&&(n.addEventListener("message",g),chrome.runtime.onMessage.addListener(w)),a.addEventListener("contextmenu",e=>{e.preventDefault()}),t&&h(s,o),setInterval(()=>{chrome.runtime.id||y()},5e3),history.pushState(null,"",location.href),n.onpopstate=()=>{history.go(1)}}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,o),l.exports}(()=>{const e=o(4391);chrome.runtime.onMessage.addListener((e,t,o)=>{"essayblockersignalcheck"===e.action&&o({action:"injected"})});const t=()=>{const t=[],o=()=>{const o=document.querySelectorAll(".tox-mbtn__select-label");for(const e of o)"View"===e.innerHTML&&e.remove(),"Insert"===e.innerHTML&&e.remove(),"Tools"===e.innerHTML&&e.remove();const n=document.querySelectorAll(".tox-editor-container");for(const o of n){const n=o.querySelector("iframe");n?.contentWindow&&!1===t.includes(n?.contentWindow)&&((0,e.protectPage)(null,!1,null,n.contentWindow),t.push(n.contentWindow))}document.querySelectorAll("button[title='Links']").forEach(e=>{e.remove()}),document.querySelectorAll("button[title='Images']").forEach(e=>{e.remove()}),document.querySelectorAll("button[title='Record/Upload Media']").forEach(e=>{e.remove()}),document.querySelectorAll("button[title='Documents']").forEach(e=>{e.remove()}),document.querySelectorAll("#plug-apps-button").forEach(e=>{e.remove()})};o(),setInterval(()=>{o()},2e3)};chrome.runtime.sendMessage({action:"getlmstype"},o=>{"moodle"===o.lmsType&&(()=>{const t=[],o=()=>{document.querySelectorAll("[aria-label='Build with TinyMCE']").forEach(e=>e.remove()),document.querySelectorAll("[aria-label='Source code']").forEach(e=>e.remove()),document.querySelectorAll("[aria-label='Link']").forEach(e=>e.remove()),document.querySelectorAll(".tox-editor-container").forEach(async o=>{await new Promise(e=>setTimeout(()=>e(null),500));const n=o.querySelector("iframe")?.contentWindow;n&&!1===t.includes(n)&&((0,e.protectPage)(null,!1,null,n),t.push(n))})};o(),new MutationObserver(e=>{for(const t of e)"childList"===t.type&&o()}).observe(document,{subtree:!0,childList:!0})})(),"d2l"===o.lmsType&&(()=>{const t=[],o=()=>{const o=["d2l-quicklink","d2l-isf","d2l-image","d2l-source-code"];document.querySelectorAll("d2l-htmleditor").forEach(n=>{const r=n.shadowRoot?.querySelector("iframe");if(r){const o=r.contentWindow;o&&!1===t.includes(o)&&((0,e.protectPage)(null,!1,null,o),t.push(o))}const l=n.shadowRoot?.querySelector("d2l-htmleditor-toolbar"),a=l.shadowRoot?.querySelector(".d2l-htmleditor-toolbar-container");a?.querySelector("d2l-htmleditor-menu-item[cmd='d2l-image']")?.remove(),l.shadowRoot?.querySelectorAll("d2l-htmleditor-button").forEach(e=>{const t=e.getAttribute("cmd");t&&o.includes(t)&&e.remove()});const c=n.shadowRoot?.querySelector("d2l-htmleditor-context-menu"),s=c?.querySelector("d2l-htmleditor-link-display-context-menu");s?.shadowRoot?.querySelector("d2l-htmleditor-context-menu-link-actions")?.shadowRoot?.querySelector("d2l-htmleditor-link-button")?.remove(),l.shadowRoot?.querySelector("[cmd='d2l-isf']")?.remove(),l.shadowRoot?.querySelector("[cmd='d2l-quicklink']")?.remove()})};o(),setInterval(()=>{o()},2e3)})(),"canvasclassic"===o.lmsType&&t(),"canvasnew"===o.lmsType&&t(),"blackboardog"===o.lmsType&&(()=>{const e=()=>{const e=document.querySelectorAll(".tox-tinymce");for(const t of e)t.querySelector("button[title='Add content']")?.remove(),t.querySelector("button[title='Insert/edit link']")?.remove(),t.querySelector("button[title='Add content']")?.remove(),t.querySelector(".tox-statusbar__branding")?.remove();const t=document.querySelectorAll(".tox-dialog__body-nav-item");for(const e of t)e.textContent?.includes("Plugins")&&e.remove(),e.textContent?.includes("Version")&&e.remove()};e(),new MutationObserver(t=>{for(const o of t)"childList"===o.type&&e()}).observe(document,{subtree:!0,childList:!0})})(),"schoology"===o.lmsType?(()=>{const e=()=>{const e=document.querySelectorAll(".essay-wrapper");for(const t of e)t.querySelector(".mce_sContentImage")?.remove()};e(),setInterval(()=>{e()},2e3)})():(()=>{const t=[];setInterval(()=>{const o=document.querySelectorAll(".tox-edit-area__iframe");for(const n of o)n?.contentWindow&&!1===t.includes(n?.contentWindow)&&(t.push(n.contentWindow),(0,e.protectPage)(null,!1,null,n.contentWindow))},2e3)})()})})()})();